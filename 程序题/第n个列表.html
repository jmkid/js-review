<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <table id="tb">
        <tr>
            <td><input type="text" value="php"></td>
            <td><span onclick="listup(this)">[上移]</span></td>
            <td><span onclick="listdel(this)">[删除]</span></td>
            <td><span onclick="listdown(this)">[下移]</span></td>
        </tr>
        <tr>
            <td><input type="text" value="javascript"></td>
            <td><span onclick="listup(this)">[上移]</span></td>
            <td><span onclick="listdel(this)">[删除]</span></td>
            <td><span onclick="listdown(this)">[下移]</span</td>
        </tr>
        <tr>
            <td><span onclick="add()">添加文本</span></td>
        </tr>
    </table>
</body>
<script>
    var tb = document.getElementById("tb");
    var up = '<span onclick = "listup(this)"' + '>[上移]</span>';
    var del = '<span onclick = "listdel(this)"' + '>[删除]</span>';
    var down = '<span onclick = "listdown(this)"' + '>[下移]</span>';

    function listup(key) {
        var trindex = key.parentNode.parentNode.rowIndex;
        var tdval = key.parentNode.parentNode.cells[0].firstChild.value;
        var tva = '<input type="text" value=' + tdval + '>'

        if (trindex == 0) {
            alert('已经是第一行');
        } else {
            tb.deleteRow(trindex)
            var newTr = tb.insertRow(trindex - 1);
            createTd(newTr, tva);
        }
    }

    function listdel(key) {
        var trindex = key.parentNode.parentNode.rowIndex;
        tb.deleteRow(trindex);
    }

    function listdown(key) {
        var trindex = key.parentNode.parentNode.rowIndex;
        var tdval = key.parentNode.parentNode.cells[0].firstChild.value;
        var tva = '<input type="text" value=' + tdval + '>'
        if (trindex == tb.rows.length - 2) {
            alert('已经是最后一行');
        } else {
            tb.deleteRow(trindex)
            var newTr = tb.insertRow(trindex + 1);
            createTd(newTr, tva);
        }
    }

    function add() {
        var newTr = tb.insertRow();
        var newTd1 = newTr.insertCell();
        newTd1.innerHTML = "<input type='text'>"
        var newTd2 = newTr.insertCell();
        newTd2.innerHTML = '<input type="button" value="确定" onclick="yes(this)">';
        var newTd3 = newTr.insertCell();
        newTd3.innerHTML = '<input type="button" value="取消" onclick="no(this)">';
    }

    function yes(key) {
        var trindex = key.parentNode.parentNode.rowIndex;
        var tdval = key.parentNode.parentNode.cells[0].firstChild.value;
        var tva = '<input type="text" value=' + tdval + '>'
        tb.deleteRow(trindex);
        var newTr = tb.insertRow(0);
        createTd(newTr, tva);
    }

    function no(key) {
        var trindex = key.parentNode.parentNode.rowIndex;
        tb.deleteRow(trindex);
    }

    function createTd(newTr, tva) {
        var newTd1 = newTr.insertCell();
        newTd1.innerHTML = tva;
        var newTd2 = newTr.insertCell();
        newTd2.innerHTML = up;
        var newTd3 = newTr.insertCell();
        newTd3.innerHTML = del;
        var newTd4 = newTr.insertCell();
        newTd4.innerHTML = down;
    }
</script>

</html>